# 2021年7月5日
## github配置流程
### 1. 配置本地密钥
```batch
ssh-keygen -t rsa -C "your_email@youremail.com" 
```
### 2. 配置用户名和地址
```batch
$ git config --global user.name "your name"
$ git config --global user.email "your_email@youremail.com"
```
### 3. 初始化仓库
```batch
git init
```
### 4. 推送
```batch
git add <文件>
git commit -m "提交信息"
git remote git remote add origin <仓库地址>
git push origin master
```
## xposed模块开发基本操作
### 1. 编辑AndroidManifest.xml文件
添加下列 meta-data 代码
```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.batchathook">
    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.BatChatHook">
        <meta-data
            android:name="xposedmodule"
            android:value="true" />
        <meta-data
            android:name="xposeddescription"
            android:value="这是一个Xposed例程" />
        <meta-data
            android:name="xposedminversion"
            android:value="53" />
    </application>
</manifest>
```
### 2. 修改build.gradle
***配置gradle报错时，修改gradle version版本为7.0***
在 “项目名称/app/src/main/”目录下找到build.gradle，添加代码

```xml
repositories {
    jcenter()
}
compileOnly 'de.robv.android.xposed:api:82'
compileOnly 'de.robv.android.xposed:api:82:sources'
```
### 3.写hook代码
```JAVA
public class batChatHook implements IXposedHookLoadPackage {
    public void handleLoadPackage(XC_LoadPackage.LoadPackageParam loadPackageParam) throws Throwable {
        if (loadPackageParam.packageName.equals("com.example.root.xposd_hook_new")) {
            XposedBridge.log(" has Hooked!");
            Class clazz = loadPackageParam.classLoader.loadClass(
                    "com.example.root.xposd_hook_new.MainActivity");
            XposedHelpers.findAndHookMethod(clazz, "toastMessage", new XC_MethodHook() {
                protected void beforeHookedMethod(MethodHookParam param) throws Throwable {
                    super.beforeHookedMethod(param);
                    //XposedBridge.log(" has Hooked!");
                }
                protected void afterHookedMethod(MethodHookParam param) throws Throwable {
                    param.setResult("你已被劫持");
                }
            });
        }
    }
}
```
### 4.添加入口，方便xp找到hook类
右键点击 “main ” 文件夹 ，选择new --> Folder -->Assets Folder，新建assets 文件夹，然后右键点击 assets文件夹，new--> file，文件名为xposed_init（文件类型选text），并在其中写上入口类的完整路径（就是自己编写的那一个Hook类），这样， Xposed框架就能够从这个 xposed_init 读取信息来找到模块的入口，然后进行Hook操作了。
## 脱壳打包
### 1. dex->smali 
dex->smali dex2->smali_classes2
### 2. 把smali塞回去
### 3. 修改Androidmainfest.xml入口
### 4. apktool打包 
```batch
java -jar apktool.jar b apkFile/
```
